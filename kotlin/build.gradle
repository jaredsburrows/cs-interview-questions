import org.jetbrains.kotlin.gradle.tasks.KotlinCompilationTask
import org.jetbrains.kotlin.gradle.dsl.JvmTarget

plugins {
    alias(libs.plugins.kotlin.jvm)
    alias(libs.plugins.license)
}

apply from: rootProject.file('gradle/compile.gradle')

tasks.named('compileKotlin', KotlinCompilationTask.class) {
    compilerOptions {
        allWarningsAsErrors = true
        jvmTarget = JvmTarget.JVM_11
    }
}

kotlin {
    jvmToolchain {
        languageVersion.set(JavaLanguageVersion.of(JavaVersion.VERSION_11.toString()))
    }
}

test {
    useJUnitPlatform()
}

dependencies {
    implementation platform(libs.kotlin.bom)
    implementation libs.kotlin.stdlib
    implementation libs.kotlin.stdlib7
    implementation libs.kotlin.stdlib8

    testRuntimeOnly libs.spek.junit
    testRuntimeOnly libs.junit.engine
    testRuntimeOnly libs.kotlin.reflect

    testImplementation libs.junit.api
    testImplementation libs.spek.jvm
    testImplementation libs.kotlin.test
//    testImplementation libs.kotlin.junit // Cannot select module with conflict on capability
    testImplementation libs.kotlin.junit5
}
