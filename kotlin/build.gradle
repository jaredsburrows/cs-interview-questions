plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.6.21'
}

apply from: rootProject.file('gradle/compile.gradle')

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).configureEach {
    kotlinOptions {
        allWarningsAsErrors = true
        jvmTarget = JavaVersion.VERSION_1_8.toString()
    }
}

test {
    useJUnitPlatform()
}

dependencies {
    implementation platform(deps.kotlin.bom)
    implementation deps.kotlin.stdlib
    implementation deps.kotlin.stdlib7
    implementation deps.kotlin.stdlib8

    testRuntimeOnly deps.spek.junit
    testRuntimeOnly deps.junit.engine
    testRuntimeOnly deps.kotlin.reflect

    testImplementation deps.junit.api
    testImplementation deps.spek.jvm
    testImplementation deps.kotlin.test
//    testImplementation deps.kotlin.junit // Cannot select module with conflict on capability
    testImplementation deps.kotlin.junit5
}
