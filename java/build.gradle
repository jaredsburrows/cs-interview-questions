plugins {
    id 'java-library'
    id 'groovy'
    id 'jacoco'
    alias(libs.plugins.license)
}

apply from: rootProject.file('gradle/compile.gradle')

java {
    sourceCompatibility = JavaVersion.VERSION_11.toString()
    targetCompatibility = JavaVersion.VERSION_11.toString()

    toolchain {
        languageVersion.set(JavaLanguageVersion.of(JavaVersion.VERSION_11.toString()))
    }
}

test {
    useJUnitPlatform()
    finalizedBy jacocoTestReport
}

jacocoTestReport {
    dependsOn test
    reports {
//        xml.enabled = true
//        html.enabled = true
    }
}

dependencies {
    compileOnly libs.findbugs

    testRuntimeOnly libs.junit.engine

    testImplementation localGroovy()
    testImplementation libs.spockcore, { exclude module: 'groovy-all' } // Use localGroovy()
    testImplementation libs.equalsverifier
}
